<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-COMPATIBLE" content="IE=edge">
<meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1" />
<title>测试</title>
<style type="text/css">
.logbox {
	background-color: #000;
	color: #fff;
	position: absolute;
	position: fixed;
	top: 0;
	right: 0;
	width: 50%;
	bottom: 0;
	overflow-y: auto;
	border: none;
}
.leftbox {
	width: 48%;
}
div {
	border: 1px solid #2788DA;
	padding: 2px;
}
    .cc1 {
        color: red;
    }
    .cc2 {
        color: blue;
    }
    .cc3 {
        color: yellow;
    }

	#main3 {
		background-color: aliceblue;
		height: 72px;
		position: relative;
	}

	.colorBlock {
		display: inline-block;
		width: 3%;
		height: 24px;
		background-color: #2788DA;
		position: absolute;
		left: 0;
		top: 0;
	}

.colorBlock2 {
	display: inline-block;
	width: 3%;
	height: 24px;
	background-color: #ff793f;
	position: absolute;
	left: 0;
	top: 24px;
}

.colorBlock3 {
	display: inline-block;
	width: 3%;
	height: 24px;
	background-color: #45da66;
	position: absolute;
	left: 0;
	top: 48px;
}

</style>

<script>
	var oldlog = function() {
	};
	function mylog(str) {
		if (document.getElementById('log2')) {
			var a = document.getElementById('log2');
			a.innerHTML = a.innerHTML + "<br>" + str;
			a.scrollTop = a.scrollHeight;
		}
		if (typeof oldlog == "function")
			oldlog.apply(console, arguments);
		else
			oldlog(str);
	}
	if (typeof console == "undefined")
		console = {};
	if (console.log)
		oldlog = console.log;
	console.log = mylog;
</script>
<script src="../src/erej.js"></script>
	<script src="../src/erej.ajax.js"></script>
	<script src="../src/erej.anim.js"></script>

</head>
<body>
	<div class="leftbox">

		<div id="main1" action="ok" name="12" style="color:red;font-size:20px;">1111111</div>
	  <div id="main2" name="13" action="test_123" class="b1">
			<input type="text" value="123" />
			<label>
				<span>vvv1</span>
				<input type="radio" name="ra1" value="v1"/>
			</label>
			<label>
				<span>vvv2</span>
				<input type="radio" name="ra1" value="v2"/>
			</label>
		<textarea>ko</textarea>
		  <div>
			  <label for="sex_2">
				  <span>男</span>
				  <input type="radio" name="sex" id="sex_2" value="b" checked="checked">
			  </label>
			  <label for="sex_1">
				  <span>女</span>
				  <input type="radio" name="sex" id="sex_1" value="g">
			  </label>
		  </div>
			
	    <br>
		  <button id="testbtn">ajax</button>
	    <br>
	    <input type="file" name="fileField" id="fileField">
        <br>
        <p>
          <label>
            <input type="checkbox" name="mr1" value="11" id="mr1_0">
            复选框1</label>
          <br>
          <label>
            <input type="checkbox" name="mr1" value="22" id="mr1_1">
            复选框2</label>
          <br>
          <label>
            <input type="checkbox" name="mr1" value="33" id="mr1_2">
            复选框3</label>
          <br>
          <select name="select" id="select">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
          </select> 
          <select name="select2" size="3" multiple id="select2">
            <option value="1">1</option>
            <option value="2" selected>2</option>
            <option value="3">3</option>
          </select>
        </p>
      </div>
		<div id="main3" class="a1" data-name="name3" data-id="id33" data-age="age333">
			<span class="colorBlock"></span>
			<span class="colorBlock2"></span>
			<span class="colorBlock3"></span>
		</div>
	
		<div id="main4">
			44444
			<div id="main5" action="ok" class="a1 b1">
				55555
				<input name="user" type="text" placeholder="请输入账号" />
				<div id="main6">
					666666
					<div id="main7">777777</div>
				</div>
			</div>
		</div>
	
		<div id="log"></div>
	</div>
	<div id="log2" class="logbox"></div>

	<script>
		function log(str) {
			$('#log').html($('#log').html() + "<br>" + str);
		}
		var f1 = function(e, data) {
			log('click1 cur:' + this.id + " src:" + e.srcElement.id + " data:"
					+ data);

            //e.preventBubble();
            //e.cancelBubble = true;

            if (e.stopPropagation)
                e.stopPropagation();
            else {
                e.cancelBubble = true;
                console.log("event not support stopPropagation");
            }
		};
		var f2 = function(e, data) {
			log('click2 cur:' + this.id + " src:" + e.srcElement.id + " data:"
					+ data + " proxy:" + (e.proxyElement?e.proxyElement.id:"no"));
		};

		window.onload = function() {
			log("onload");

		}
		
		function showSysInfo() {
			console.log('===============');
			console.log("【userAgent】:" + window.navigator.userAgent);
			console.log("【appName】:" + window.navigator.appName);
			//console.log("【appVersion】:" + window.navigator.appVersion);
			//console.log("【appCodeName】:" + window.navigator.appCodeName);
			console.log("【kernel】:" + erej.browser.kernel() + " @"	+ erej.browser.ver());
			console.log("【os】:" + erej.browser.os() + " @"	+ erej.browser.osVer());
			console.log("【isIE】:" + erej.browser.isIE());
			console.log("【isMobile】:"+ erej.browser.isMobile());
			console.log('===============');
			console.log(typeof Array.prototype.slice);
			console.log(Array.prototype.slice.call({0:"000", 1:'111', length:2}));
			//console.log(erej.isNodeList(document.body.childNodes));
			console.log(erej.isLikeArray(document.body.childNodes));
		}

		erej.ready(function() {
			log("dom ready.");

			//var t = $('div');
			//t.html('yes123456');

			$('#main5').on('click', f1, null, "data5555555");
			$('#main4').on('click', f2, '[action="ok"]', "data4444444");
			//alert(t.html());

			$('#fileField').on('change', function (e) {
				console.log(this.type+" : "+this.value);
			})

			//alert("123".startWith('1'));
			showSysInfo();

            $('#main3').classname('cc1 cc2 cc3').classname('cc3 cc2');

            $('#main4').css({
                'font-size':'18px',
                'color':'red'
            });

            console.log($('#main4').css());

			$('#testbtn').on('click', function (e) {


				//debugger;
				//var a=$('.cc3');

				//var b=a;


				/*$.ajax({
					"url": "/gz/PHP/api.php?act=test",
					'jsonp': true,
					'timeout': 3000,
					"data": {
						"user": "ok",
						"pass": "okk"
					},
					"success": function(data) {
						console.log(data);
					},
					"error": function(msg) {
						console.log(msg);
					}
				});*/
			})
		});
		
		$(window).on('resize', function(e) {
            //if (!erej.browser.isIE()) {
                //$('#log2').html('');
                erej.browser.agent = navigator.userAgent.toLowerCase();
                //showSysInfo();
            //}
		});

		function setPos(sel, p) {
			$(sel).css({position:"absolute", left: p+"%"});
		}

		function testAnim() {
			var a = erej.animFrame({
				long: 3000, type: "easeOutBounce", progress: function (p) {
					setPos('.colorBlock', p)
				}, finish: function () {
					console.log('block1 finish.')
				}, from: 0,
				to: 97
			});
			var b = erej.animFrame({
				long: 1000, type: "easeOutBack", progress: function (p) {
					setPos('.colorBlock2', p)
				}, finish: function () {
					console.log('block2 finish.')
				}, from: 0,
				to: 97
			});
			var c = erej.animFrame({
				long: 3000, type: "easeOutBounce", progress: function (p) {
					setPos('.colorBlock3', p)
				}, finish: function () {
					console.log('block3 finish.')
				}, from: 0,
				to: 97
			});

			/*a.run();
			 b.run();
			 c.run();*/

			var s = erej.anim({
				times: erej.anim.INFINITE,
				finish: function () {
					console.log('blocks finish.')
				}
			});

			s = s.parallel(a, b).sleep(3000).serial(c);

			s.run();

			return s;
		}
	</script>
	<iframe src="http://git.oschina.net/progit/" width="400" height="400"></iframe>
</body>
</html>